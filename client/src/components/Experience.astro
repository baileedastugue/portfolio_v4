---
import Section from '../layouts/Section.astro';
import type { Company } from '../types';
import '../styles/history.css';

interface Props {
  companies: Company[];
}

const { companies = [] } = Astro.props;
---

<Section id='experience'>
  <h2 slot='title'>Experience</h2>
  <div slot='body' class='experience flex-column'>
    <div class='section flex-column'>
      {
        companies.map((company) => (
          <div class='experience-company section-event flex-column'>
            <h3>{company.name}</h3>
            <div class='section-items flex-column'>
              {company.roles.map((role) => (
                <div class='experience-role flex-column'>
                  <span class='section-header'>
                    <h4 class='section-title'>{role.title}</h4>
                    <span class='experience-dates section-dates'>
                      {role.startDate} -{' '}
                      {role.current ? 'Present' : role.endDate}
                    </span>
                  </span>
                  {role.tagline && (
                    <p class='experience-tagline' set:html={role.tagline} />
                  )}
                  {role.description && <p>{role.description}</p>}
                </div>
              ))}
            </div>
          </div>
        ))
      }
    </div>
  </div>
</Section>

<style>
  .experience {
    gap: 1rem;
  }
  .experience-dates {
    margin: 0 0.75rem;
  }
  .experience-role {
    gap: 0.35rem;
  }

  .experience-company {
    gap: 0.5rem;
  }
  .experience-tagline {
    margin: 0 0.75rem;
    font-weight: 600;
  }

  :global(.experience-tagline span) {
    font-weight: 400;
  }

  :global(.experience-tagline .tagline-link) {
    align-items: center;
    color: var(--color-tertiary);
    display: inline-flex;
    font-weight: 600;
    gap: 0.25rem;
    text-decoration: none;
    transition: text-decoration 0.2s ease;
  }

  :global(.experience-tagline .tagline-link:hover) {
    text-decoration: underline;
  }

  :global(.experience-tagline .external-link-icon) {
    flex-shrink: 0;
  }
  @media (min-width: 768px) {
    .experience-dates {
      text-align: right;
      word-break: nowrap;
    }
  }
</style>
