<nav>
  <ul>
    <li>
      <a href='#experience'>Experience</a>
    </li>
    <li>
      <a href='#education'>Education</a>
    </li>
    <li>
      <a href='#projects'>Projects</a>
    </li>
    <li>
      <a href='#posts'>Posts</a>
    </li>
  </ul>
</nav>

<style>
  li,
  ul {
    align-items: center;
    display: flex;
    flex-direction: row;
    justify-content: center;
  }

  li:not(:last-child)::after {
    content: '|';
    font-size: 1.5rem;
    margin: 0 4px 1px;
  }

  nav {
    position: sticky;
    top: 0;
    backdrop-filter: blur(4px);
    z-index: 100;
    transition: all 0.3s ease;
  }

  nav.stuck {
    background-color: rgba(5, 19, 103, 0.9);
    color: #fff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 0.75rem 0;
  }

  nav.stuck a,
  nav.stuck button {
    color: var(--color-surface-3);
  }

  nav.stuck a:hover {
    color: var(--color-surface-3);
    text-decoration: underline;
  }
</style>

<script>
  import { tooltipManager } from '../utils/tooltip.ts';

  document.addEventListener('DOMContentLoaded', function () {
    const emailButton = document.getElementById('email-button');
    const nav = document.querySelector('nav');

    // Handle email button click
    if (emailButton) {
      emailButton.addEventListener('click', function () {
        const email = 'bailee.dast@gmail.com';
        navigator.clipboard
          .writeText(email)
          .then(() => {
            tooltipManager.show(emailButton, {
              text: 'Copied!',
              position: 'bottom',
              color: '#fff',
              backgroundColor: 'var(--color-success)',
              duration: 1500,
            });
          })
          .catch((err) => {
            console.error('Failed to copy email: ', err);
            // Fallback: show email in alert
            alert(email);
          });
      });
    }

    // Handle nav stuck state
    if (nav) {
      let isStuck = false;

      window.addEventListener('scroll', () => {
        const navRect = nav.getBoundingClientRect();
        const shouldBeStuck = navRect.top <= 0;

        if (shouldBeStuck && !isStuck) {
          nav.classList.add('stuck');
          isStuck = true;
        } else if (!shouldBeStuck && isStuck) {
          nav.classList.remove('stuck');
          isStuck = false;
        }
      });
    }
  });
</script>
