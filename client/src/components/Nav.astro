<nav>
  <ul>
    <li>
      <a href='#experience'>Experience</a>
    </li>
    <li>
      <a href='#education'>Education</a>
    </li>
    <li>
      <a href='#projects'>Projects</a>
    </li>
    <li>
      <a href='https://www.linkedin.com/in/bailee-dastugue/' target='_blank'>
        <svg
          class='icon linkedin-icon'
          focusable='false'
          aria-hidden='true'
          viewBox='0 0 24 24'
        >
          <path
            d='M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z'
          ></path>
        </svg>
      </a>
    </li>
    <li>
      <button id='email-button' title='bailee.dast@gmail.com'>
        <svg
          class='icon email-icon'
          focusable='false'
          aria-hidden='true'
          viewBox='0 0 24 24'
        >
          <path
            d='M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z'
          ></path>
        </svg>
      </button>
    </li>
  </ul>
</nav>

<style>
  li,
  ul {
    align-items: center;
    display: flex;
    flex-direction: row;
    justify-content: center;
  }

  li:not(:last-child)::after {
    content: '|';
    font-size: 1.5rem;
    margin: 0 4px 1px;
  }

  nav {
    position: sticky;
    top: 0;
    backdrop-filter: blur(4px);
    z-index: 100;
    transition: all 0.3s ease;
  }

  nav.stuck {
    background-color: rgba(5, 19, 103, 0.9);
    color: #fff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    padding: 0.75rem 0;
  }

  nav.stuck a,
  nav.stuck button {
    color: #fff;
  }

  nav.stuck a:hover {
    color: #fff;
    text-decoration: underline;
  }

  nav.stuck .icon {
    fill: #fff;
  }

  .icon {
    width: 1.5rem;
    height: 1.5rem;
    transition: fill 0.2s ease;
  }
</style>

<script>
  import { tooltipManager } from '../utils/tooltip.ts';

  document.addEventListener('DOMContentLoaded', function () {
    const emailButton = document.getElementById('email-button');
    const nav = document.querySelector('nav');

    // Handle email button click
    if (emailButton) {
      emailButton.addEventListener('click', function () {
        const email = 'bailee.dast@gmail.com';
        navigator.clipboard
          .writeText(email)
          .then(() => {
            tooltipManager.show(emailButton, {
              text: 'Copied!',
              position: 'bottom',
              color: '#fff',
              backgroundColor: '#008000',
              duration: 1500,
            });
          })
          .catch((err) => {
            console.error('Failed to copy email: ', err);
            // Fallback: show email in alert
            alert(email);
          });
      });
    }

    // Handle nav stuck state
    if (nav) {
      let isStuck = false;

      window.addEventListener('scroll', () => {
        const navRect = nav.getBoundingClientRect();
        const shouldBeStuck = navRect.top <= 0;

        if (shouldBeStuck && !isStuck) {
          nav.classList.add('stuck');
          isStuck = true;
        } else if (!shouldBeStuck && isStuck) {
          nav.classList.remove('stuck');
          isStuck = false;
        }
      });
    }
  });
</script>
